{"version":3,"file":"commonHelpers.js","sources":["../src/js/task-1.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst formEl = document.querySelector('.form-search');\nconst imgContainer = document.querySelector('.gallery');\nconst loaderContainer = document.querySelector('.loader-container');\n\n// Ховаємо лоадер\nloaderContainer.style.display = 'none';\n\nformEl.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n     e.preventDefault();\n    const query = e.target.elements.text.value;\n        \n    if (query === '') {\n        return\n    };\n    // Очищуємо контейнер, показуємо лоадер\n    imgContainer.innerHTML = '';\n    loaderContainer.style.display = 'flex';\n\n    // Створюємо галерею\n    getPictures(query)\n        .then(function ({ hits}) {\n                if (hits.length>0) {\n                    const markup = hits.map(imgTemplate).join('');\n                    imgContainer.innerHTML = markup;\n\n                    // модульне вікно з бібліотеки   \n                    let gallery = new SimpleLightbox('.gallery a', { captionDelay: 250, captionsData: 'alt', showCounter: false });\n                    gallery.refresh();\n                } else {\n                    errorShow();\n                }\n        })\n        .catch(function (error) { \n            errorShow(); \n        })\n        .finally(function () {\n        // очищуємо форму, ховаємо лоадер\n        formEl.reset();\n        loaderContainer.style.display = 'none';\n    })\n}\n\n// Запит на сервер pixabay для отримання картинок\nfunction getPictures(searchText) {\n    const BASE_URL = 'https://pixabay.com/api';\n    const API_KEY = '/?key=42190673-143cbde4cd6a94de75e31d0a4';\n    const SEARCH_PARAMS = `&q=${searchText}`;\n    const PARAMS = '&image_type=photo&orientation=horizontal&safesearch=true';\n    \n    // https://pixabay.com/api/?key=42190673-143cbde4cd6a94de75e31d0a4&q=yellow+flowers&image_type=photo\n\n    const url = BASE_URL + API_KEY + SEARCH_PARAMS + PARAMS;\n    return fetch(url).then(res => res.json());\n}\n\n// Формуємо посилання на картинку з інформацією про неї\nfunction imgTemplate({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n  return ` \n  <a href=\"${largeImageURL}\" class=\"gallery-link\">\n     <figure>\n      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n      <figcaption class=\"gallery-figcaption\">\n        <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n        <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n        <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n        <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n  </figcaption>\n  </figure>\n</a >`\n    }\n\n// спливаюче вікно про помилку бібліотеки iziToast\nfunction errorShow() {\n              iziToast.show({\n                    close: true,\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                  messageColor: '#FFFFFF',\n                    messageSize: '10px',\n                    backgroundColor: '#B51B1B',\n                    position: 'topLeft',\n                    close: true,\n                  timeout: 10000,\n                  progressBarColor: '#FFFFFF',\n                  maxWidth: '380px',\n                    });\n}"],"names":["formEl","imgContainer","loaderContainer","onFormSubmit","e","query","getPictures","hits","markup","imgTemplate","SimpleLightbox","errorShow","error","searchText","BASE_URL","API_KEY","SEARCH_PARAMS","PARAMS","url","res","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast"],"mappings":"6vBAOA,MAAMA,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAe,SAAS,cAAc,UAAU,EAChDC,EAAkB,SAAS,cAAc,mBAAmB,EAGlEA,EAAgB,MAAM,QAAU,OAEhCF,EAAO,iBAAiB,SAAUG,CAAY,EAE9C,SAASA,EAAaC,EAAG,CACpBA,EAAE,eAAc,EACjB,MAAMC,EAAQD,EAAE,OAAO,SAAS,KAAK,MAEjCC,IAAU,KAIdJ,EAAa,UAAY,GACzBC,EAAgB,MAAM,QAAU,OAGhCI,EAAYD,CAAK,EACZ,KAAK,SAAU,CAAE,KAAAE,CAAI,EAAG,CACjB,GAAIA,EAAK,OAAO,EAAG,CACf,MAAMC,EAASD,EAAK,IAAIE,CAAW,EAAE,KAAK,EAAE,EAC5CR,EAAa,UAAYO,EAGX,IAAIE,EAAe,aAAc,CAAE,aAAc,IAAK,aAAc,MAAO,YAAa,EAAO,CAAA,EACrG,QAAO,CACnC,MACoBC,GAEpB,CAAS,EACA,MAAM,SAAUC,EAAO,CACpBD,GACZ,CAAS,EACA,QAAQ,UAAY,CAErBX,EAAO,MAAK,EACZE,EAAgB,MAAM,QAAU,MACxC,CAAK,EACL,CAGA,SAASI,EAAYO,EAAY,CAC7B,MAAMC,EAAW,0BACXC,EAAU,2CACVC,EAAgB,MAAMH,IACtBI,EAAS,2DAITC,EAAMJ,EAAWC,EAAUC,EAAgBC,EACjD,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,CAC5C,CAGA,SAASV,EAAY,CAAC,aAAAW,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAG,CAC3F,MAAO;AAAA,aACIL;AAAA;AAAA,kBAEKD,WAAsBE;AAAA;AAAA,iEAEyBC;AAAA,iEACAC;AAAA,oEACGC;AAAA,qEACCC;AAAA;AAAA;AAAA,MAIhE,CAGL,SAASf,GAAY,CACPgB,EAAS,KAAK,CACR,MAAO,GACP,QAAS,2EACX,aAAc,UACZ,YAAa,OACb,gBAAiB,UACjB,SAAU,UACV,MAAO,GACT,QAAS,IACT,iBAAkB,UAClB,SAAU,OAC5B,CAAqB,CACrB"}